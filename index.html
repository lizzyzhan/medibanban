<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mindful Loop | 觉察当下</title>
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="overlay"></div>
    <audio id="bg-music" preload="auto" loop></audio>

    <div class="success-overlay" id="success-overlay">
        <div class="success-content">
            <span class="success-icon">🌿</span>
            <div class="success-text">今日修习已完成</div>
            <div style="font-size: 0.9rem; color: #ccc; margin-top: 10px;">内心归于平静</div>
        </div>
    </div>

    <div class="layer-content header">
        <div class="time" id="clock">12:00:00</div>
        <div class="date" id="date">...</div>
    </div>

    <div class="layer-content quote-wrapper">
        <div class="quote-card" id="quote-card" onclick="changeQuote()">
            <div id="quote-content" class="fade-content">
                <div class="quote-text" id="quote-text">...</div>
                <span class="quote-author" id="quote-author"></span>
            </div>
            <span class="tap-hint">轻触切换语录</span>
        </div>
    </div>

    <div class="layer-content bottom-area">
        <div class="checkin-btn-container" onclick="handleCheckIn()">
            <div class="checkin-ring"></div>
            <div class="main-btn">
                <svg viewBox="0 0 24 24"><path d="M12,2C7.5,2,4,6.5,4,12s4.5,10,8,10s8-5.5,8-10S15.5,2,12,2z M12,20c-2.5,0-6-3.5-6-8s2.5-8,6-8s6,4.5,6,8 S14.5,20,12,20z"/><circle cx="12" cy="12" r="3" fill="white"/></svg>
            </div>
        </div>

        <div class="toolbar">
            <button class="icon-btn" id="music-btn" onclick="toggleMusic()">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
            </button>
            <button class="icon-btn" onclick="openStats()">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            </button>
            <button class="icon-btn" id="fav-btn" onclick="toggleFavorite()">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
            </button>
             <button class="icon-btn" onclick="openFavList()">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
            </button>
        </div>
    </div>

    <div class="modal" id="stats-modal" onclick="if(event.target === this) closeStats()">
        <div class="modal-card">
            <div class="modal-header"><span class="modal-title">冥想记录</span><span class="close-modal" onclick="closeStats()">&times;</span></div>
            <div class="stats-overview">
                <div class="stat-box"><span class="stat-num" id="stat-week">0</span><span class="stat-label">本周</span></div>
                <div class="stat-box"><span class="stat-num" id="stat-month">0</span><span class="stat-label">本月</span></div>
                <div class="stat-box"><span class="stat-num" id="stat-year">0</span><span class="stat-label">年度</span></div>
            </div>
            <div class="calendar-header">
                <span class="cal-nav-btn" onclick="changeCalendarMonth(-1)">&#9664;</span><span class="current-month" id="cal-month-label">...</span><span class="cal-nav-btn" onclick="changeCalendarMonth(1)">&#9654;</span>
            </div>
            <div class="calendar-grid" id="calendar-grid"></div>
        </div>
    </div>

    <div class="modal" id="fav-list-modal" onclick="if(event.target === this) closeFavList()">
        <div class="modal-card">
            <div class="modal-header"><span class="modal-title">灵感收藏</span><span class="close-modal" onclick="closeFavList()">&times;</span></div>
            <div id="fav-list-container" style="padding-bottom: 20px;"></div>
        </div>
    </div>

    <div class="toast" id="toast">提示信息</div>

    <!-- 引入脚本文件：先引入数据，再引入逻辑 -->
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>